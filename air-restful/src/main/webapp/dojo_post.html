<!DOCTYPE html>
<html>
<head>
    <meta name="generator" content="HTML Tidy, see www.w3.org">
    <script type="text/javascript">
        dojoConfig = {parseOnLoad: true}
    </script>

    <!-- CDN
    <link type="text/css" rel="stylesheet"
          href="//ajax.googleapis.com/ajax/libs/dojo/1.9.0/dijit/themes/tundra/tundra.css">
    <script src="//ajax.googleapis.com/ajax/libs/dojo/1.9.0/dojo/dojo.js"></script>
     -->
    <!-- local -->
    <link rel="stylesheet" href="webjars/bootstrap/2.3.1/css/bootstrap.css">
    <link rel="stylesheet" href="webjars/dojo/1.8.3/dijit/themes/tundra/tundra.css">
    <script src="webjars/dojo/1.8.3/dojo/dojo.js"></script>


    <script type="text/javascript">
        dojo.require("dijit.form.Button");

        function sendText() {
            var button = dijit.byId("submitButton2");

            dojo.connect(button, "onClick", function (event) {
                // The parameters to pass to xhrPost, the message, and the url to send it to
                // Also, how to handle the return and callbacks.
                var xhrArgs = {
                    url: "restful/abc/add",
                    postData: dojo.toJson({name: "eric", value: "dojo33"}),
                    headers: { "Content-Type": "application/json; charset=utf-8", "Accept": "application/json; charset=utf-8"},
                    handleAs: "json",
                    load: function (data) {
                        dojo.byId("response2").innerHTML = "Message posted.";
                    },
                    error: function (error) {
                        // We'll 404 in the demo, but that's okay.  We don't have a 'postIt' service on the
                        // docs server.
                        dojo.byId("response2").innerHTML = "Message posted.";
                    }
                };
                dojo.byId("response2").innerHTML = 'Message being sent...';
                // Call the asynchronous xhrPost
                var deferred = dojo.xhrPost(xhrArgs);
            });
        }
        dojo.ready(sendText);
    </script>

    <title></title>
</head>
<body class="tundra">
<h1>Dojo Post Output:</h1>
<button data-dojo-type="dijit/form/Button" id="submitButton2">Send it!</button>
<div id="response2"></div>
<br/><a href="index.html" target="_self">Go Home</a><br/>
</body>
</html>